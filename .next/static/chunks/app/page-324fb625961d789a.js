(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5739:function(e,n,t){Promise.resolve().then(t.bind(t,8386))},8386:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return O}});var o=t(7437),i=t(2265),r=t(6645),l=t(4691),s=t(7116),a=t(6351),c=t(8884),d=t(6548);let u=e=>new Date(e).toLocaleDateString("pt-BR");function x(e){let{appointments:n,onEdit:t}=e,i=e=>{null!=e?t(e.toString()):console.error("ID inv\xe1lido:",e)};return(0,o.jsxs)(r.Z,{children:[(0,o.jsx)(l.Z,{children:(0,o.jsxs)(s.Z,{children:[(0,o.jsx)(a.Z,{sx:{fontWeight:"bold"},children:"Nome"}),(0,o.jsx)(a.Z,{sx:{fontWeight:"bold"},children:"Data de Nascimento"}),(0,o.jsx)(a.Z,{sx:{fontWeight:"bold"},children:"In\xedcio do Atendimento"}),(0,o.jsx)(a.Z,{sx:{fontWeight:"bold"},children:"\xdaltimo Atendimento"}),(0,o.jsx)(a.Z,{sx:{fontWeight:"bold"},children:"Valor"}),(0,o.jsx)(a.Z,{sx:{fontWeight:"bold"},children:"Condutas"}),(0,o.jsx)(a.Z,{sx:{fontWeight:"bold"},children:"Atendente"})]})}),(0,o.jsx)(c.Z,{children:n.map(e=>(0,o.jsxs)(s.Z,{children:[(0,o.jsx)(a.Z,{children:e.nome}),(0,o.jsxs)(a.Z,{children:[u(e.data_atendimento)," ",u(e.data_atendimento)]}),(0,o.jsx)(a.Z,{children:(0,o.jsx)(d.Z,{variant:"contained",sx:{backgroundColor:"#05662B",textTransform:"none",color:"#fff","&:hover":{backgroundColor:"#05662B"}},onClick:()=>e.id&&i(e.id),children:"Editar"})})]},e.id))})]})}var f=t(7846),m=t(7156),h=t(468),p=t(3719),g=t(2170),j=t.n(g),b=t(1097),Z=t(9879),I=t(6436),C=t(1153);let k={backgroundColor:"transparent",color:"#05662B",fontFamily:"Inter !important",border:"1px solid #05662B",borderRadius:"0","&.Mui-selected":{backgroundColor:"#05662B",color:"#fff"}};var y=function(e){let{count:n,page:t,onChange:r}=e,[l,s]=(0,i.useState)(t);return(0,o.jsx)(I.Z,{color:"primary",count:n,page:l,"data-testid":"pagination-test",onChange:(e,n)=>{s(n),r(n)},renderItem:e=>(0,o.jsx)(C.Z,{sx:k,components:{previous:b.Z,next:Z.Z},...e})})},v=t(2268),w=t(3866),N=t(6463);function O(){let[e,n]=(0,i.useState)(!0),[t,r]=(0,i.useState)(null),[l,s]=(0,i.useState)(""),[a,c]=(0,i.useState)(""),{appointmentList:d,setAppointmentList:u}=(0,v.O)();console.log(d);let[g,b]=(0,i.useState)({page:1,limit:3,total:0}),Z=(0,N.useRouter)(),I=(0,i.useCallback)(async()=>{n(!0);try{let{data:e,error:n,count:t}=await w.O.from("appointments").select("*",{count:"exact"}).ilike("nome","%".concat(l,"%")).range((g.page-1)*g.limit,g.page*g.limit-1);if(n)throw n;console.log("Dados retornados:",e),u(e||[]),b(e=>({...e,total:t||0}))}catch(e){console.error("Erro ao buscar atendimentos:",e),r("Erro ao buscar atendimentos")}finally{n(!1)}},[l,g.page,g.limit,u]);(0,i.useEffect)(()=>{I()},[I]);let C=(0,i.useCallback)(j()(e=>{s(e),b(e=>({...e,page:1}))},300),[]);return e?(0,o.jsxs)(m.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:[(0,o.jsx)(h.Z,{}),";"]}):t?(0,o.jsx)(p.Z,{color:"error",children:t}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.Z,{variant:"h4",component:"h1",sx:{mb:2,textAlign:"center"},children:"Lista de Atendimentos"}),(0,o.jsx)(m.default,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",textAlign:"center",m:""},children:(0,o.jsx)(f.I,{name:"filter",label:"Filtrar por nome",value:a,onChange:e=>{c(e.target.value),C(e.target.value)},sx:{mb:2,width:"200px"}})}),(0,o.jsxs)(m.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",flex:1,mt:4},children:[(0,o.jsx)(x,{appointments:d,onEdit:e=>{Z.push("/cadastro-atendimentos?id=".concat(e))}}),(0,o.jsx)(m.default,{sx:{flexGrow:1}}),(0,o.jsx)(m.default,{sx:{display:"flex",justifyContent:"center",position:"fixed",bottom:0,width:"100%",mb:2},children:(0,o.jsx)(y,{count:Math.ceil(g.total/g.limit),page:g.page,onChange:e=>{b(n=>({...n,page:e}))}})})]})]})}},7846:function(e,n,t){"use strict";t.d(n,{I:function(){return m}});var o=t(7437),i=t(3719),r=t(2265),l=t(8646),s=t(832),a=t(7156),c=t(8258);function d(){let e=(0,l._)(["\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n\n  /* margin-block: 12px; */\n"]);return d=function(){return e},e}function u(){let e=(0,l._)(["\n  max-height: 48px;\n\n  & .MuiOutlinedInput-notchedOutline {\n    border: 1px solid #687178;\n    border-radius: 8px;\n    padding: 12px 16px;\n  }\n\n  & ::placeholder {\n    font-weight: 400;\n    font-size: 1.6rem;\n    line-height: 1.9rem;\n  }\n\n  & legend {\n    display: none;\n  }\n\n  & fieldset {\n    top: 0;\n  }\n"]);return u=function(){return e},e}let x=(0,s.ZP)(a.default)(d()),f=(0,s.ZP)(c.Z)(u()),m=r.forwardRef(function(e,n){let{name:t,label:r,helperText:l,placeholder:s,sx:a,...c}=e;return(0,o.jsxs)(x,{children:[r&&(0,o.jsx)(i.Z,{htmlFor:e.name||"",fontSize:"1.4rem",lineHeight:"1.7rem",component:"label",color:e.disabled?"neutral.pure":"text.primary",children:r}),(0,o.jsx)(f,{...c,sx:{mt:e.label?.5:0,...a},placeholder:s,id:e.name,role:"textbox",ref:n,autoComplete:"off"}),l&&(0,o.jsx)(i.Z,{variant:"caption",component:"p",sx:{color:e.error?"error.main":"text.secondary"},children:l})]})})},3866:function(e,n,t){"use strict";t.d(n,{O:function(){return o}});let o=(0,t(4593).eI)("https://sczjehhrvfdqsjbxkibx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNjemplaGhydmZkcXNqYnhraWJ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk4NzQzNzUsImV4cCI6MjA0NTQ1MDM3NX0.mR2J30ZKMJ-7Fp6gZn2sz1Xbomf5ihCjIDZP99ke0lI")},2268:function(e,n,t){"use strict";t.d(n,{O:function(){return o}});let o=(0,t(9099).Ue)(e=>({appointmentList:[],setAppointmentList(n){e({appointmentList:n})}}))}},function(e){e.O(0,[233,271,405,736,971,23,744],function(){return e(e.s=5739)}),_N_E=e.O()}]);